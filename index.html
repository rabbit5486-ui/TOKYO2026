<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 æ±äº¬æ¥µè‡´æ‰‹å†Š</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #2c3e50; --accent: #e67e22; --bg: #f4f7f6; --white: #ffffff; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding-bottom: 80px; }
        .header { background: var(--primary); color: var(--white); padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; }
        
        /* æ¯æ—¥è¡Œç¨‹åˆ‡æ›å™¨ */
        .day-selector { display: flex; overflow-x: auto; background: var(--white); padding: 10px; gap: 10px; border-bottom: 1px solid #ddd; sticky; top: 55px; z-index: 99; }
        .day-btn { padding: 8px 15px; background: #eee; border-radius: 20px; white-space: nowrap; font-size: 13px; cursor: pointer; border: none; }
        .day-btn.active { background: var(--accent); color: white; }

        .tab-content { display: none; padding: 15px; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        .day-panel { display: none; }
        .day-panel.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* å¡ç‰‡æ¨£å¼ */
        .card { background: var(--white); border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .img-box { width: 100%; border-radius: 8px; margin: 10px 0; overflow: hidden; background: #eee; }
        .img-box img { width: 100%; display: block; }
        .time-node { display: flex; gap: 10px; margin: 12px 0; border-left: 2px solid #ddd; padding-left: 15px; position: relative; }
        .time-node::before { content: ''; position: absolute; left: -6px; top: 0; width: 10px; height: 10px; background: var(--accent); border-radius: 50%; }
        .time-val { font-weight: bold; color: var(--accent); font-size: 14px; }

        /* è¡Œæç®±è‡ªå®šç¾© */
        .editable-title { border: none; background: transparent; font-weight: bold; font-size: 1.1em; color: var(--primary); width: 80%; }
        .add-option { display: flex; gap: 5px; margin-top: 10px; }
        .add-option input { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }

        /* è¨˜å¸³æ¨£å¼ */
        .form-group { margin-bottom: 10px; }
        .form-group label { display: block; font-size: 12px; color: #666; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .expense-item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; font-size: 14px; }

        /* åº•éƒ¨å°è¦½ */
        .navbar { position: fixed; bottom: 0; width: 100%; background: var(--white); display: flex; border-top: 1px solid #ddd; height: 65px; z-index: 1000; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #7f8c8d; font-size: 12px; }
        .nav-item.active { color: var(--accent); }
    </style>
</head>
<body>

<div class="header"><h3>2026 æ±äº¬æ—…éŠ App</h3></div>

<div class="navbar">
    <div class="nav-item active" onclick="switchMainTab('itinerary', this)"><i class="fas fa-calendar-alt"></i>è¡Œç¨‹</div>
    <div class="nav-item" onclick="switchMainTab('luggage', this)"><i class="fas fa-suitcase"></i>è¡Œæ</div>
    <div class="nav-item" onclick="switchMainTab('wallet', this)"><i class="fas fa-yen-sign"></i>è¨˜å¸³</div>
</div>

<div id="itinerary" class="tab-content active">
    <div class="day-selector" id="daySelector">
        <button class="day-btn active" onclick="switchDay(1)">2/27</button>
        <button class="day-btn" onclick="switchDay(2)">2/28</button>
        <button class="day-btn" onclick="switchDay(3)">3/1</button>
        <button class="day-btn" onclick="switchDay(4)">3/2</button>
        <button class="day-btn" onclick="switchDay(5)">3/3</button>
        <button class="day-btn" onclick="switchDay(6)">3/4</button>
        <button class="day-btn" onclick="switchDay(7)">3/5</button>
        <button class="day-btn" onclick="switchDay(8)">3/6</button>
        <button class="day-btn" onclick="switchDay(9)">3/7</button>
        <button class="day-btn" onclick="switchDay(10)">3/8</button>
    </div>

    <div id="day1" class="day-panel active">
        <div class="card">
            <h3>2/27 (äº”) å…¥å¢ƒèˆ‡é›ªå…·æº–å‚™</h3>
            <div class="time-node">
                <div class="time-val">12:35</div>
                <div>ğŸ›¬ æŠµé”æˆç”°æ©Ÿå ´äºŒèˆª (æ˜Ÿå®‡ JX800)</div>
            </div>
            <div class="time-node">
                <div class="time-val">14:02</div>
                <div>ğŸš„ æ­ä¹˜ SkyLiner å¾€äº¬æˆä¸Šé‡</div>
            </div>
            <div class="time-node">
                <div class="time-val">15:30</div>
                <div>ğŸ›… <b>é—œéµä»»å‹™ï¼š</b>è¡Œæåˆ†æµå¯„æ”¾ (ä¸Šé‡ç«™/ä½ç¦è¾¦å…¬å®¤)</div>
            </div>
            <div class="time-node">
                <div class="time-val">16:30</div>
                <div>ğŸ›ï¸ å°å·ç”ºé›ªå…·è¡—é¸è³¼é›ªè¡£é›ªè¤² (B5å‡ºå£)</div>
            </div>
            <div class="time-node">
                <div class="time-val">19:42</div>
                <div>ğŸš„ ä¸Šé‡æ–°å¹¹ç·šç«™ç™¼è»Š â†’ è¶Šå¾Œæ¹¯æ²¢</div>
            </div>
        </div>
    </div>

    <div id="day2" class="day-panel">
        <div class="card">
            <h3>2/28 (å…­) å²©åŸæ»‘é›ªé¦–æ—¥</h3>
            <div class="img-box"><img src="http://googleusercontent.com/image_collection/image_retrieval/7436371898079008275_0"></div>
            <div class="time-node">
                <div class="time-val">07:20</div>
                <div>ğŸš• æ­è¨ˆç¨‹è»Šå‰å¾€å²©åŸæ»‘é›ªå ´ (æ¥é§è»Šå°šæœªé–‹å§‹)</div>
            </div>
            <div class="time-node">
                <div class="time-val">08:30</div>
                <div>ğŸ‚ 7å°æ™‚æ•™ç·´èª²é–‹å§‹ (åˆä¼‘1å°æ™‚)</div>
            </div>
        </div>
    </div>
    
    <div id="day3" class="day-panel"><div class="card"><h3>3/1 (æ—¥) çŸ³æ‰“ä¸¸å±±æ»‘é›ª</h3><p>å…¨æ—¥æ»‘é›ªï¼Œæ¢ç´¢å‹æƒ…ä¹‹é˜è§€æ™¯å°ã€‚</p></div></div>
    <div id="day7" class="day-panel">
        <div class="card">
            <h3>3/5 (å››) WBC å°ç£ vs æ¾³æ´²</h3>
            <div class="img-box"><img src="http://googleusercontent.com/image_collection/image_retrieval/10433037536560321649_0"></div>
            <div class="time-node"><div class="time-val">12:00</div><div>âš¾ æ±äº¬å·¨è›‹é–‹è³½</div></div>
            <div class="time-node"><div class="time-val">æ™šä¸Š</div><div>ğŸŒƒ æ©«æ¿±æ•£ç­– (èµ¤ç…‰ç“¦ã€éºµåŒ…è¶…äºº)</div></div>
        </div>
    </div>
</div>

<div id="luggage" class="tab-content">
    <div id="bagContainer">
        </div>
    <button onclick="addNewBag()" style="width:100%; padding:15px; border:2px dashed #ccc; border-radius:12px; background:none; color:#666;">+ æ–°å¢è¡Œæç®±</button>
</div>

<div id="wallet" class="tab-content">
    <div class="card">
        <h3>æ–°å¢æ¶ˆè²»</h3>
        <div class="form-group"><label>æ—¥æœŸ</label><input type="date" id="expDate"></div>
        <div class="form-group"><label>é …ç›®</label><input type="text" id="expTitle" placeholder="ä¾‹å¦‚ï¼šæ•˜æ•˜è‹‘"></div>
        <div class="form-group"><label>é‡‘é¡</label><input type="number" id="expAmount"></div>
        <div class="form-group">
            <label>åˆ†é¡èˆ‡å¹£åˆ¥</label>
            <div style="display:flex; gap:5px;">
                <select id="expCat"><option>é£²é£Ÿ</option><option>äº¤é€š</option><option>è³¼ç‰©</option><option>é–€ç¥¨</option></select>
                <select id="expCurr"><option>JPY (Â¥)</option><option>TWD ($)</option></select>
            </div>
        </div>
        <button onclick="addExpense()" style="width:100%; padding:12px; background:var(--accent); color:white; border:none; border-radius:8px; font-weight:bold;">å„²å­˜å¸³ç›®</button>
    </div>

    <div class="card">
        <h3>æ¶ˆè²»æ­·å²</h3>
        <div id="expenseList"></div>
        <div style="text-align:right; margin-top:10px; font-weight:bold; border-top:1px solid #eee; padding-top:10px;">
            ç›®å‰ç´€éŒ„ç¸½è¨ˆ: <span id="totalDisplay">0</span> (JPY)
        </div>
    </div>
</div>

<script>
    // --- åŸºç¤åˆ‡æ›é‚è¼¯ ---
    function switchMainTab(id, el) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    function switchDay(day) {
        document.querySelectorAll('.day-panel').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
        const target = document.getElementById('day' + day);
        if(target) target.classList.add('active');
        event.target.classList.add('active');
    }

    // --- è¡Œæç®¡ç† (LocalStorage) ---
    let bags = JSON.parse(localStorage.getItem('tokyo_bags')) || [
        { name: "è¡Œæç®± A (æ»‘é›ª)", items: ["é›ªè¡£", "é›ªå…·"] },
        { name: "è¡Œæç®± B (æ‡‰æ´)", items: ["çƒè¡£", "åŠ æ²¹æ£’"] }
    ];

    function renderBags() {
        const container = document.getElementById('bagContainer');
        container.innerHTML = '';
        bags.forEach((bag, bIdx) => {
            let itemHtml = bag.items.map((it, iIdx) => `
                <div class="check-item" style="display:flex; align-items:center; margin:5px 0;">
                    <input type="checkbox"> <span>${it}</span>
                    <i class="fas fa-times" style="margin-left:auto; color:#ccc;" onclick="removeItem(${bIdx}, ${iIdx})"></i>
                </div>
            `).join('');
            
            container.innerHTML += `
                <div class="card">
                    <input class="editable-title" value="${bag.name}" onchange="updateBagName(${bIdx}, this.value)">
                    <div id="items-${bIdx}">${itemHtml}</div>
                    <div class="add-option">
                        <input type="text" id="newIn-${bIdx}" placeholder="æ–°å¢é …ç›®...">
                        <button onclick="addItem(${bIdx})" style="background:var(--primary); color:white; border:none; border-radius:4px; padding:0 10px;">+</button>
                    </div>
                </div>`;
        });
        localStorage.setItem('tokyo_bags', JSON.stringify(bags));
    }

    function updateBagName(idx, val) { bags[idx].name = val; renderBags(); }
    function addNewBag() { bags.push({name: "æ–°è¡Œæç®±", items: []}); renderBags(); }
    function addItem(idx) {
        let input = document.getElementById(`newIn-${idx}`);
        if(input.value) { bags[idx].items.push(input.value); input.value = ''; renderBags(); }
    }
    function removeItem(bIdx, iIdx) { bags[bIdx].items.splice(iIdx, 1); renderBags(); }

    // --- è¨˜å¸³ç®¡ç† (LocalStorage) ---
    let expenses = JSON.parse(localStorage.getItem('tokyo_expenses')) || [];

    function addExpense() {
        const item = {
            date: document.getElementById('expDate').value,
            title: document.getElementById('expTitle').value,
            amount: document.getElementById('expAmount').value,
            cat: document.getElementById('expCat').value,
            curr: document.getElementById('expCurr').value
        };
        if(!item.amount || !item.title) return alert("è«‹è¼¸å…¥é …ç›®èˆ‡é‡‘é¡");
        expenses.push(item);
        renderExpenses();
        // æ¸…ç©ºè¼¸å…¥
        document.getElementById('expTitle').value = '';
        document.getElementById('expAmount').value = '';
    }

    function renderExpenses() {
        const list = document.getElementById('expenseList');
        list.innerHTML = '';
        let total = 0;
        expenses.forEach((ex, idx) => {
            list.innerHTML += `
                <div class="expense-item">
                    <div><b>${ex.title}</b><br><small>${ex.date} | ${ex.cat}</small></div>
                    <div style="text-align:right">
                        ${ex.curr === 'JPY (Â¥)' ? 'Â¥' : '$'} ${ex.amount}
                        <i class="fas fa-trash" style="margin-left:10px; color:#ddd;" onclick="deleteExpense(${idx})"></i>
                    </div>
                </div>`;
            if(ex.curr.includes('JPY')) total += parseFloat(ex.amount);
        });
        document.getElementById('totalDisplay').innerText = total.toLocaleString();
        localStorage.setItem('tokyo_expenses', JSON.stringify(expenses));
    }
    function deleteExpense(idx) { expenses.splice(idx, 1); renderExpenses(); }

    // åˆå§‹è¼‰å…¥
    renderBags();
    renderExpenses();
    document.getElementById('expDate').valueAsDate = new Date();
</script>

</body>
</html>
